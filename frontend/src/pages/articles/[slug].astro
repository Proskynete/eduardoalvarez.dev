---
import Layout from "../../layouts/base.astro";
import BlogContent from "../../components/blog-content/index.astro";
import type { Post } from "../../interfaces";
import { getAllPosts } from "../../utils/sanity";

export async function getStaticPaths() {
  const posts: Post[] = await getAllPosts();

  return posts.map((post) => ({
    params: { slug: post.slug.current },
    props: { post },
  }));
}

const { post } = Astro.props;

const seo = {
  title: post.title,
  description: post.description,
  url: post.slug.current,
};
---

<Layout seo={seo}>
  <BlogContent post={post} />
</Layout>
