---
import Article from "../components/article/index.astro";
import Layout from "../layouts/base.astro";
import { getAllPosts } from "../utils/sanity";
import config from "../settings";

const posts = await getAllPosts();
---

<Layout>
  <div class="space-y-2 pb-8 pt-6 md:space-y-5">
    <h1
      class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-6xl md:leading-14"
    >
      Últimos artículos
    </h1>

    <ul class="divide-y divide-gray-200 dark:divide-gray-700">
      {
        posts.slice(0, config.home_max_posts).map((post) => (
          <li class="py-12">
            <Article post={post} />
          </li>
        ))
      }
    </ul>

    {
      posts.length > config.home_max_posts && (
        <div class="flex justify-end text-base font-medium leading-6">
          <a
            href="/articles"
            class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
            aria-label="All posts"
          >
            Ver todos &rarr;
          </a>
        </div>
      )
    }
  </div>
</Layout>
